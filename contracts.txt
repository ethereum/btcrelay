

02f653a05dc68a7df9a74c8eb9a50a15e98bed6e is sampleContractA.py

To get data to paste in AZ:
from pyepm import api
api.abi_data('processTransfer', 'i', [42])
Block 2161 was the creation
Block 2162 stored 42 using pyepm above
Block 2178 was failed contract.transact().processTransfer(33).toString(10)
  it failed because the abi was using uint256 and it should be int256 since Serpent is now using signed ints


btcrelay.py contract is:
d82829ef90ed0f0d1c3f8f9e82cb4e923b7ba24c
(Doesn't show up in Contracts pane perhaps https://github.com/ethereum/serpent/issues/62
and when you try to send a message to it, AZ says Destination not a contract)


Scenario1: storing (real) genesis and block1:
Here is the info on storing the genesis block:
>>> bstr = '0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a29ab5f49ffff001d1dac2b7c'
>>> bb = bstr.decode('hex')
>>> data = api.abi_data('storeBlockHeader','s', [bb])
>>> data
'0x91d0ded500000000000000000000000000000000000000000000000000000000000000500100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a29ab5f49ffff001d1dac2b7c'

We would send 'data' to the contract, but it wasn't able to be created in AZ.


After storing the genesis, here's ABI data for storing block1:
>>> b1str = '010000006fe28c0ab6f1b372c1a6a246ae63f74f931e8365e15a089c68d6190000000000982051fd1e4ba744bbbe680e1fee14677ba1a3c3540bf7b1cdb606e857233e0e61bc6649ffff001d01e36299'
>>> api.abi_data('storeBlockHeader','s', [b1str.decode('hex')])
'0x91d0ded50000000000000000000000000000000000000000000000000000000000000050010000006fe28c0ab6f1b372c1a6a246ae63f74f931e8365e15a089c68d6190000000000982051fd1e4ba744bbbe680e1fee14677ba1a3c3540bf7b1cdb606e857233e0e61bc6649ffff001d01e36299'



Scenario2: testRelayTx

>>> api.abi_data('testingonlySetGenesis', 'i', [0x000000000002d01c1fccc21636b607dfd930d31d01c3a62104612a1719011250])
'0x3b880072000000000002d01c1fccc21636b607dfd930d31d01c3a62104612a1719011250'

To get the abi for storing the headers, run python script/abiRelayTx.py

Then abi for relayTx:
>>> types
'siiaaii'
>>> args
['0100000001032e38e9c0a84c6046d687d10556dcacc41d275ec55fc00779ac88fdf357a187000000008c493046022100c352d3dd993a981beba4a63ad15c209275ca9470abfcd57da93b58e4eb5dce82022100840792bc1f456062819f15d33ee7055cf7b5ee1af1ebcc6028d9cdb1c3af7748014104f46db5e9d61a9dc27b8d64ad23e7383a4e6ca164593c2527c038c0857eb67ee8e825dca65046b82c9331586c82e0fd1f633f25f87c161bc6f8a630121df2b3d3ffffffff0200e32321000000001976a914c398efa9c392ba6013c5e04ee729755ef7f58b3288ac000fe208010000001976a914948c765a6914d43f2a7ac177da2c2f6b52de3d7c88ac00000000', 115767921789412926100933682018446757625251444727920376795127517381710205878980L, 2, [63360798072827732011079001120771167228569304803927829804291675908297574083975L, 64314182592135631644571729974664332912373045195955364489612163419788843200073L], [1, 2], 1533267872647776902154320487930659211795065581998445848740226310L, 'b4e4745d4c6e678c4e1c635d92818719740213c2']
>>> api.abi_data('relayTx', types, args)
'0xdfeab41a000000000000000000000000000000000000000000000000000000000000020600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002fff2525b8931402dd09222c50775608f75787bd2b87e56995a7bdd30f79702c40000000000000000000000000000000000000000000000000000000000000002000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506000000000000000000000000b4e4745d4c6e678c4e1c635d92818719740213c230313030303030303031303332653338653963306138346336303436643638376431303535366463616363343164323735656335356663303037373961633838666466333537613138373030303030303030386334393330343630323231303063333532643364643939336139383162656261346136336164313563323039323735636139343730616266636435376461393362353865346562356463653832303232313030383430373932626331663435363036323831396631356433336565373035356366376235656531616631656263633630323864396364623163336166373734383031343130346634366462356539643631613964633237623864363461643233653733383361346536636131363435393363323532376330333863303835376562363765653865383235646361363530343662383263393333313538366338326530666431663633336632356638376331363162633666386136333031323164663262336433666666666666666630323030653332333231303030303030303031393736613931346333393865666139633339326261363031336335653034656537323937353565663766353862333238386163303030666532303830313030303030303139373661393134393438633736356136393134643433663261376163313737646132633266366235326465336437633838616330303030303030308c14f0db3df150123e6f3dbbf30f8b955a8249b62ac1d1ff16284aefa3d06d878e30899078ca1813be036a073bbf80b86cdddde1c96e9e9c99e9e3782df4ae4900000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002'






46509d73e9d86ecffba01a13288b98366586c669 is sampleContractcallsA.py
sample msg to it:
00
0000000000000000000000000000000000000000000000000000000000000001
000000000000000000000000205215f022af4950618730bcfae161b28397bc41
000000000000000000000000000000000000000000000000000000000000000b

concat:
000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000205215f022af4950618730bcfae161b28397bc41000000000000000000000000000000000000000000000000000000000000000b



d91d87f8b485a028bc17c1d47c3703ff01483e14 is sampleContractB.py


01c64ba40b13ed3e43d7efebb748d5da7548ea7e is sampleContractC.py (reads 32nd char)
5d1e3a9efc03d0e625514ad41ce13cd8720970d8 is contractC that reads the 33rd char

block 15008 has the manual transact()

block 15025 int works



solo
block 15137 tx ebfe1 shows how 9998 gets stored
block 15138 shows the OOG trying to store 9997
block 15141 trying to store 'a' (97) in storage



sha256 documentation:
mystr = text("11111111111111111111111111111111")
  res = sha256(mystr:str)
  return(res)
[-53140752622162270260467659020085806305646383077295113839779940122544596587222L]
>>> -53140752622162270260467659020085806305646383077295113839779940122544596587222 % 2**256
62651336615153925163103325988602101547623601588345450199677643885368533052714L

which equals

>>> j = '3131313131313131313131313131313131313131313131313131313131313131'
>>> sha256(j.decode('hex'))
'8a83665f3798727f14f92ad0e6c99fdab08ee731d6cd644c131223fd2f4fed2a'
>>> 0x8a83665f3798727f14f92ad0e6c99fdab08ee731d6cd644c131223fd2f4fed2a
62651336615153925163103325988602101547623601588345450199677643885368533052714L

This is same:
mystr = text("11111111111111111111111111111111")
  save(self.buf[0], mystr, chars=32)

  myarr = load(self.buf[0], items=1)
  log(data=myarr)

  res = sha256(myarr, chars=32)
  return(res)
